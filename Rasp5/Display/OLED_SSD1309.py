from luma.core.interface.serial import spi
from luma.core.render import canvas
from luma.oled.device import ssd1309
import time

# SPI?????
serial = spi(port=0, device=0, gpio_DC=25, gpio_RST=27, gpio_CS=8)

# SSD1309 OLED?????????
device = ssd1309(serial)

# ?????
width = device.width
height = device.height

# ??????????????
x, y = 10, 10
vx, vy = 1, 1

# ???????????
try:
    while True:
        # ??????
        with canvas(device) as draw:
            # ?????????
            draw.rectangle((x, y, x + 10, y + 10), outline="white", fill="white")

        # ????????????
        x += vx
        y += vy

        # ?????????
        if x <= 0 or x >= width - 10:
            vx = -vx
        if y <= 0 or y >= height - 10:
            vy = -vy

        # ????
        time.sleep(0.01)

except KeyboardInterrupt:
    pass
